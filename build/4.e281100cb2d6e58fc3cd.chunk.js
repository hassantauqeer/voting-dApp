webpackJsonp([4],{"./app/components/TaskList/index.js":function(e,t,o){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,o){function n(r,i){try{var a=t[r](i),s=a.value}catch(e){return void o(e)}if(!a.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=o("./node_modules/react/react.js"),v=o.n(f),m=o("./node_modules/antd/lib/index.js"),h=o("./Solidity_Contract/VotingInstance.js"),b=o("./node_modules/moment/src/moment.js"),y=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,o,n,r){var i=t&&t.defaultProps,a=arguments.length-3;if(o||0===a||(o={}),o&&i)for(var s in i)void 0===o[s]&&(o[s]=i[s]);else o||(o=i||{});if(1===a)o.children=r;else if(a>1){for(var p=Array(a),l=0;l<a;l++)p[l]=arguments[l+3];o.children=p}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),g=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),k=y("b",{},void 0,"Owner: "),w=y("b",{},void 0,"Description:"),T=y("b",{},void 0,"End Time:"),O=y("b",{},void 0,"Approval status: "),_=y("b",{},void 0,"Approved"),C=y("b",{},void 0,"Not Approved"),x=y("b",{},void 0,"In Progress"),I=function(e){function t(){var e,o,a,s,p=this;r(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return o=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.castVote=function(){var e=n(regeneratorRuntime.mark(function e(t){var o,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("vv"),e.next=3,h.a.methods.castVote(a.props.taskIndex,t).send({from:a.props.currentAccount,gas:"1000000"});case 3:o=e.sent,console.log(o,o.events.VoteCasted.returnValues),o.events.VoteCasted&&(n=o.events.VoteCasted.returnValues,r={owner:n[0],name:n[1],endingTime:n[2],voteCount:n[3],approved:n[4],complete:n[5]},a.props.updateTasks({updatedTask:r,updatedTaskIndex:a.props.taskIndex}));case 6:case"end":return e.stop()}},e,p)}));return function(t){return e.apply(this,arguments)}}(),a.finalizeTask=n(regeneratorRuntime.mark(function e(){var t,o,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.methods.finalizeTask(a.props.taskIndex).send({from:a.props.currentAccount,gas:"1000000"});case 2:t=e.sent,console.log(t,"resp"),o=a.props.task,t.transactionHash&&(n={owner:o.owner,name:o.name,endingTime:o.endingTime,voteCount:o.voteCount,approved:o.approved,complete:!0},a.props.updateTasks({updatedTask:n,updatedTaskIndex:a.props.taskIndex}));case 6:case"end":return e.stop()}},e,p)})),s=o,i(a,s)}return a(t,e),g(t,[{key:"render",value:function(){var e=this.props.task;return y("div",{},void 0,y(m.Modal,{title:e.name,visible:this.props.visible,onOk:this.props.handleOk,onCancel:this.props.handleCancel,className:"task-model",cancelText:"Close"},void 0,y(m.Row,{style:{margin:"10px auto"}},void 0,k,e.owner),y(m.Row,{style:{margin:"10px auto"}},void 0,w," No Description available yet..."),y(m.Row,{style:{margin:"10px auto"}},void 0,T," ",new Date(parseInt(e.endingTime)).toTimeString()),y(m.Row,{style:{margin:"10px auto"}},void 0,y(m.Col,{span:12},void 0,O,e.approved&&(e.complete||this.props.timeDate>parseInt(e.endingTime))&&y("span",{style:{color:"#52c41a"}},void 0,_),!e.approved&&(e.complete||this.props.timeDate>parseInt(e.endingTime))&&y("span",{style:{color:"#f5222d"}},void 0,C),!e.approved&&!e.complete&&this.props.timeDate<parseInt(e.endingTime)&&y("span",{style:{color:"#FADB14"}},void 0,x)),!e.approved&&!e.complete&&this.props.timeDate<parseInt(e.endingTime)&&y("div",{},void 0,y(m.Col,{offset:6,span:2},void 0,y(m.Tooltip,{placement:"topLeft",title:"Up Vote"},void 0,y(m.Button,{onClick:this.castVote.bind(this,!0),type:"primary",shape:"circle",icon:"up"}))),y(m.Col,{},void 0,y(m.Tooltip,{placement:"topLeft",title:"Down Vote"},void 0,y(m.Button,{onClick:this.castVote.bind(this,!1),type:"danger",shape:"circle",icon:"down"}))))),!e.complete&&this.props.currentAccount===e.owner&&this.props.timeDate>parseInt(e.endingTime)&&y(m.Row,{style:{margin:"10px auto"}},void 0,y(m.Button,{onClick:this.finalizeTask},void 0,"Finalize Task"))))}}]),t}(v.a.Component),j=I,A=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,o,n,r){var i=t&&t.defaultProps,a=arguments.length-3;if(o||0===a||(o={}),o&&i)for(var s in i)void 0===o[s]&&(o[s]=i[s]);else o||(o=i||{});if(1===a)o.children=r;else if(a>1){for(var p=Array(a),l=0;l<a;l++)p[l]=arguments[l+3];o.children=p}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),D=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),S=A("sub",{},void 0,"Hours"),P=A("sub",{},void 0,"Minutes"),M=A("sub",{},void 0,"Sec"),R=A("sub",{},void 0,"Hours"),V=A("sub",{},void 0,"Minutes"),E=A("sub",{},void 0,"Sec"),L=A(m.Col,{span:19},void 0,"No Description yet...."),N=function(e){function t(e){s(this,t);var o=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.openModal=function(){o.setState({visible:!0})},o.handleOk=function(){o.setState({visible:!1})},o.handleCancel=function(){o.setState({visible:!1})},o.handleLabel=function(e){if(o.props.timeDate>parseInt(parseInt(e.endingTime))&&!e.approved)return console.log("1"),A("span",{style:{color:"#f5222d"}},void 0,"Not Approved");if(o.props.timeDate>parseInt(parseInt(e.endingTime)&&e.approved&&e.complete))return console.log("2"),A("span",{style:{color:"#52c41a"}},void 0,"Approved");console.log("3");var t=Object(b.default)(),n=Object(b.default)(parseInt(e.endingTime)),r=b.default.duration(n.diff(t)),i={};return r>0&&(i={h:Math.floor(r.asHours()),m:Math.floor(r.minutes()),s:Math.floor(r.seconds())}),A("span",{},void 0,"Ending In: ",A("b",{},void 0,i.h),S," ",A("b",{},void 0,i.m),P," ",A("b",{},void 0,i.s),M)},o.state={visible:!1,voted:!1,extra:""},o}return l(t,e),D(t,[{key:"componentDidMount",value:function(){var e=this.handleLabel(this.props.task);this.setState({extra:e})}},{key:"render",value:function(){var e=this.props.task,t=Object(b.default)(),o=Object(b.default)(parseInt(e.endingTime)),n=b.default.duration(o.diff(t)),r={};return n>0&&(r={h:Math.floor(n.asHours()),m:Math.floor(n.minutes()),s:Math.floor(n.seconds())}),A("div",{},void 0,A(m.Card,{onClick:this.openModal,className:"individual-task",title:e.name,bordered:!1,extra:this.props.timeDate>parseInt(parseInt(e.endingTime))&&!e.approved||!e.approved&&e.complete?A("span",{style:{color:"#f5222d"}},void 0,"Not Approved"):e.approved?A("span",{style:{color:"#52c41a"}},void 0,"Approved"):A("span",{},void 0,"Ending In: ",A("b",{},void 0,r.h),R," ",A("b",{},void 0,r.m),V," ",A("b",{},void 0,r.s),E)},void 0,A(m.Row,{},void 0,L,A(m.Col,{span:5},void 0,A(m.Button,{type:"primary"},void 0,A("b",{},void 0,e.voteCount)," Â  Votes")))),A(j,{visible:this.state.visible,handleCancel:this.handleCancel,handleOk:this.handleOk,task:e,currentAccount:this.props.currentAccount,timeDate:this.props.timeDate,taskIndex:this.props.taskIndex,updateTasks:this.props.updateTasks}))}}]),t}(v.a.Component),$=N,B=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,o,n,r){var i=t&&t.defaultProps,a=arguments.length-3;if(o||0===a||(o={}),o&&i)for(var s in i)void 0===o[s]&&(o[s]=i[s]);else o||(o=i||{});if(1===a)o.children=r;else if(a>1){for(var p=Array(a),l=0;l<a;l++)p[l]=arguments[l+3];o.children=p}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),H=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),z=(m.Form.Item,m.Modal.confirm,function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),H(t,[{key:"render",value:function(){var e=this.props.home.tasksList,t=this.props.home.contractData,o=this.props.home.currentAccountInfo.currentAccount,n=this;return B(m.Card,{loading:!t.contractLoaded,title:"All Tasks",style:{width:"50%",textAlign:"center",marginTop:50}},void 0,e.map(function(e,t){return B($,{taskIndex:t,timeDate:n.props.timeDate,task:e,currentAccount:o,updateTasks:n.props.updateTasks},t)}))}}]),t}(v.a.Component));t.default=z}});